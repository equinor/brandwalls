name: Build and deploy studio

on:
  workflow_call:
    #    inputs:
    #      environment:
    #        required: true
    #        type: string
    secrets:
      sanity_deploy_token:
      required: true

  deploy:
  name: 'Build and deploy studio'
  #  environment: ${{ inputs.environment}}
  runs-on: ubuntu-latest
  env:
    SANITY_AUTH_TOKEN: ${{ secrets.SANITY_DEPLOY_TOKEN }}
  steps:
    - name: Checkout üõéÔ∏è
      uses: actions/checkout@v3
    - name: Install pnpm
      uses: pnpm/action-setup@v4
      with:
        version: 10
    - uses: actions/setup-node@v4
      with:
        node-version: 20
        cache: 'pnpm'
    - name: Install dependencies
      run: pnpm install
    - name: Deploy Studio
      run: pnpm run deploy
